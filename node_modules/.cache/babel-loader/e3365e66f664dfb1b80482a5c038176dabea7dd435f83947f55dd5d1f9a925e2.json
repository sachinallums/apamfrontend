{"ast":null,"code":"var _jsxFileName = \"/Users/sachinallums/curis-apam/src/ChatInterface.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport './ChatInterface.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ChatInterface = ({\n  currentSkill,\n  currentScenario,\n  onNavigate\n}) => {\n  _s();\n  const [messages, setMessages] = useState([]);\n  const [input, setInput] = useState('');\n  const chatBoxRef = useRef(null);\n  useEffect(() => {\n    if (chatBoxRef.current) {\n      chatBoxRef.current.scrollTop = chatBoxRef.current.scrollHeight;\n    }\n  }, [messages]);\n  const handleSend = async () => {\n    if (input.trim()) {\n      const userMessage = {\n        from: 'user',\n        text: input\n      };\n      setMessages([...messages, userMessage]);\n      setInput('');\n      try {\n        const response = await fetch('/api/chatbot-response');\n        const data = await response.json();\n        const botMessage = {\n          from: 'robot',\n          text: data.botResponse || \"placeholder\"\n        };\n        setMessages(prevMessages => [...prevMessages, botMessage]);\n      } catch (error) {\n        console.error('Error fetching chatbot response:', error);\n        const botMessage = {\n          from: 'robot',\n          text: \"Failed to fetch response\"\n        };\n        setMessages(prevMessages => [...prevMessages, botMessage]);\n      }\n    }\n  };\n  const handleKeyPress = e => {\n    if (e.key === 'Enter') {\n      handleSend();\n    }\n  };\n  const handleBackToSelectSkills = () => {\n    onNavigate('start');\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chat-interface\",\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleBackToSelectSkills,\n      className: \"back-button\",\n      children: \"Back\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Learning Goal\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"Improve your \", /*#__PURE__*/_jsxDEV(\"strong\", {\n        children: [currentSkill, \" skills\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 30\n      }, this), \" with Roberto by using some of the different strategies suggested below. When you feel like you've achieved the learning goal, click on the finish button in the lower left or revisit an old chat by using the menu on the left-hand side.\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-box\",\n      ref: chatBoxRef,\n      children: messages.map((message, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `message ${message.from}`,\n        children: [message.from === 'robot' && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"robot-name\",\n          children: \"Roberto the Robot \\uD83E\\uDD16\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 29\n        }, this), message.text]\n      }, index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 21\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"input-box\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: input,\n        onChange: e => setInput(e.target.value),\n        onKeyPress: handleKeyPress,\n        placeholder: \"Type message here...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleSend,\n        children: \"Send\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      children: \"Finish!\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 9\n  }, this);\n};\n_s(ChatInterface, \"NGRxHm9W49cSmYTz6hg4UQNRXEY=\");\n_c = ChatInterface;\nexport default ChatInterface;\nvar _c;\n$RefreshReg$(_c, \"ChatInterface\");","map":{"version":3,"names":["React","useState","useEffect","useRef","jsxDEV","_jsxDEV","ChatInterface","currentSkill","currentScenario","onNavigate","_s","messages","setMessages","input","setInput","chatBoxRef","current","scrollTop","scrollHeight","handleSend","trim","userMessage","from","text","response","fetch","data","json","botMessage","botResponse","prevMessages","error","console","handleKeyPress","e","key","handleBackToSelectSkills","className","children","onClick","fileName","_jsxFileName","lineNumber","columnNumber","ref","map","message","index","type","value","onChange","target","onKeyPress","placeholder","_c","$RefreshReg$"],"sources":["/Users/sachinallums/curis-apam/src/ChatInterface.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport './ChatInterface.css';\n\nconst ChatInterface = ({ currentSkill, currentScenario, onNavigate }) => {\n    const [messages, setMessages] = useState([]);\n    const [input, setInput] = useState('');\n    const chatBoxRef = useRef(null);\n\n    useEffect(() => {\n        if (chatBoxRef.current) {\n            chatBoxRef.current.scrollTop = chatBoxRef.current.scrollHeight;\n        }\n    }, [messages]);\n\n    const handleSend = async () => {\n        if (input.trim()) {\n            const userMessage = { from: 'user', text: input };\n            setMessages([...messages, userMessage]);\n            setInput('');\n\n            try {\n                const response = await fetch('/api/chatbot-response');\n                const data = await response.json();\n                const botMessage = { from: 'robot', text: data.botResponse || \"placeholder\" };\n                setMessages((prevMessages) => [...prevMessages, botMessage]);\n            } catch (error) {\n                console.error('Error fetching chatbot response:', error);\n                const botMessage = { from: 'robot', text: \"Failed to fetch response\" };\n                setMessages((prevMessages) => [...prevMessages, botMessage]);\n            }\n        }\n    };\n\n    const handleKeyPress = (e) => {\n        if (e.key === 'Enter') {\n            handleSend();\n        }\n    };\n\n    const handleBackToSelectSkills = () => {\n        onNavigate('start');\n    };\n\n    return (\n        <div className=\"chat-interface\">\n            <button onClick={handleBackToSelectSkills} className=\"back-button\">Back</button>\n            <h1>Learning Goal</h1>\n            <p>\n                Improve your <strong>{currentSkill} skills</strong> with Roberto by using some of the different strategies suggested below.\n                When you feel like you've achieved the learning goal, click on the finish button in the lower left or revisit an old chat by using\n                the menu on the left-hand side.\n            </p>\n            <div className=\"chat-box\" ref={chatBoxRef}>\n                {messages.map((message, index) => (\n                    <div key={index} className={`message ${message.from}`}>\n                        {message.from === 'robot' && (\n                            <div className=\"robot-name\">\n                                Roberto the Robot ðŸ¤–\n                            </div>\n                        )}\n                        {message.text}\n                    </div>\n                ))}\n            </div>\n            <div className=\"input-box\">\n                <input\n                    type=\"text\"\n                    value={input}\n                    onChange={(e) => setInput(e.target.value)}\n                    onKeyPress={handleKeyPress}\n                    placeholder=\"Type message here...\"\n                />\n                <button onClick={handleSend}>Send</button>\n            </div>\n            <button>Finish!</button>\n        </div>\n    );\n};\n\nexport default ChatInterface;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}